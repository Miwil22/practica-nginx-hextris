server {
    listen 443 ssl;
    server_name miguel.qu3v3d0.tech;

    # --- Certificado SSL ---
    ssl_certificate /etc/ssl/certs/qu3v3d0.tech.crt;
    ssl_certificate_key /etc/ssl/private/qu3v3d0.tech.key;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # --- DIRECTORIO RAÍZ CORREGIDO ---
    root /home/miguel/html/hextrix; 
    index index.html;

    # --- COMPRESIÓN GZIP AL MÁXIMO (Rúbrica) ---
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types 
        text/plain 
        text/css 
        text/xml 
        application/javascript 
        application/json 
        image/svg+xml 
        image/x-icon; 

    # --- CACHÉ DE ACTIVOS ESTÁTICOS (7 días - Rúbrica) ---
    location ~* \.(?:ico|css|js|gif|jpe?g|png|mp3|ogg|svg|woff|woff2|otf)$ {
        expires 7d;
        add_header Cache-Control "public, no-transform";
        access_log off;
    } 

    # --- PÁGINA 404 PERSONALIZADA (Rúbrica) ---
    error_page 404 /404.html;
    location = /404.html {
        internal;
    } 

    location / {
        try_files $uri $uri/ =404;
    }

    access_log /var/log/nginx/miguel-access.log;
    error_log /var/log/nginx/miguel-error.log;
}